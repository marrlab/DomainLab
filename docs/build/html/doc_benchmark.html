
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#2196f3">
  <script src="_static/javascripts/modernizr.js"></script>
  
  
    <link rel="apple-touch-icon" href="_static/images/apple-icon-152x152.png"/>
  
  
    <title>Benchmarking with DomainLab &#8212; domainlab  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/material.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  
    <link rel="apple-touch-icon" href="_static/images/apple-icon-152x152.png"/>
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=teal data-md-color-accent=cyan>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#doc_benchmark" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="domainlab  documentation"
           class="md-header-nav__button md-logo">
          
            <i class="md-icon">school</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">DomainLab</span>
          <span class="md-header-nav__topic"> Benchmarking with DomainLab </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/marrlab/DomainLab" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    DomainLab
  </div>
</a>
          </div>
        </div>
      
      
    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="readme_link.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="doc_tasks.html" class="md-tabs__link">Task Specification</a></li>
            
            <li class="md-tabs__item"><a href="doc_custom_nn.html" class="md-tabs__link">Custom Neural Network</a></li>
            
            <li class="md-tabs__item"><a href="doc_MNIST_classification.html" class="md-tabs__link">Examples with MNIST</a></li>
            
            <li class="md-tabs__item"><a href="doc_examples.html" class="md-tabs__link">Examples by algorithm</a></li>
            
            <li class="md-tabs__item"><a href="#" class="md-tabs__link">Benchmarks</a></li>
            
            <li class="md-tabs__item"><a href="doc_output.html" class="md-tabs__link">Output Structure</a></li>
            
            <li class="md-tabs__item"><a href="doc_extend_contribute.html" class="md-tabs__link">Extend and Contribute</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="domainlab documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">school</i>
      
    </a>
    <a href="index.html"
       title="domainlab documentation">DomainLab</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/marrlab/DomainLab" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    DomainLab
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Contents:</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="modules.html" class="md-nav__link">domainlab</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="doc_algos.html" class="md-nav__link">Overview of implemented models and algorithms</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="docHDUVA.html" class="md-nav__link">HDUVA: HIERARCHICAL VARIATIONAL AUTO-ENCODING FOR UNSUPERVISED DOMAIN GENERALIZATION</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="docJiGen.html" class="md-nav__link">JiGen</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="doc_diva.html" class="md-nav__link">DIVA: Domain Invariant Variational Autoencoders</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="docMatchDG.html" class="md-nav__link">MatchDG: Domain Generalization using Causal Matching</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="docDIAL.html" class="md-nav__link">DIAL: Domain Invariant Adversarial Learning</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#doc-benchmark--page-root" class="md-nav__link">Benchmarking with DomainLab</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#setting-up-a-benchmark" class="md-nav__link">Setting up a benchmark</a>
        </li>
        <li class="md-nav__item"><a href="#running-a-benchmark" class="md-nav__link">Running a benchmark</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#benchmark-on-a-standalone-machine-with-or-without-gpu" class="md-nav__link">Benchmark on a standalone machine (with or without GPU)</a>
        </li>
        <li class="md-nav__item"><a href="#benchmark-on-a-hpc-cluster-with-slurm" class="md-nav__link">Benchmark on a HPC cluster with slurm</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#check-errors-for-slurm-runs" class="md-nav__link">Check errors for slurm runs</a>
        </li>
        <li class="md-nav__item"><a href="#map-between-slurm-job-id-and-sampled-hyperparameter-index" class="md-nav__link">Map between slurm job id and sampled hyperparameter index</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#obtained-results" class="md-nav__link">Obtained results</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#output-folder-structure" class="md-nav__link">Output folder structure</a>
        </li>
        <li class="md-nav__item"><a href="#obtain-partial-results" class="md-nav__link">Obtain partial results</a>
        </li>
        <li class="md-nav__item"><a href="#generate-plots-from-csv-file" class="md-nav__link">Generate plots from .csv file</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="benchmarking-with-domainlab">
<h1 id="doc-benchmark--page-root">Benchmarking with DomainLab<a class="headerlink" href="#doc-benchmark--page-root" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/marrlab/DomainLab/blob/master/docs/doc_benchmark.md">Documentation for Benchmark in Markdown</a></p>
<p>The package offers the ability to benchmark different user-defined experiments against each other,
as well as against different hyperparameter settings and random seeds.
The results are collected in a csv file, but also prepared in charts.</p>
<p>Within each benchmark, two aspects are considered:</p>
<ol class="arabic simple">
<li><p>Stochastic variation: variation of the performance with respect to different random seeds.</p></li>
<li><p>Sensitivity to selected hyperparameters: by sampling hyperparameters randomly,
the performance with respect to different hyperparameter choices is investigated.</p></li>
</ol>
<section id="setting-up-a-benchmark">
<h2 id="setting-up-a-benchmark">Setting up a benchmark<a class="headerlink" href="#setting-up-a-benchmark" title="Permalink to this headline">¶</a></h2>
<p>The benchmark is configured in a yaml file. We refer to <a class="reference external" href="https://github.com/marrlab/DomainLab/blob/master/docs/doc_benchmark_yaml.md">doc_benchmark_yaml.md</a> for a documented
example.</p>
</section>
<section id="running-a-benchmark">
<h2 id="running-a-benchmark">Running a benchmark<a class="headerlink" href="#running-a-benchmark" title="Permalink to this headline">¶</a></h2>
<p>For the execution of a benchmark we provide two scripts in our repository:</p>
<ul class="simple">
<li><p>local version for running the benchmark on a standalone machine:
<a class="reference external" href="https://github.com/marrlab/DomainLab/blob/master/run_benchmark_standalone.sh">run_benchmark_standalone.sh</a></p></li>
<li><p>cluster version for running the benchmark on a slurm cluster: <a class="reference external" href="https://github.com/marrlab/DomainLab/blob/master/run_benchmark_slurm.sh">run_benchmark_slurm.sh</a></p></li>
</ul>
<section id="benchmark-on-a-standalone-machine-with-or-without-gpu">
<h3 id="benchmark-on-a-standalone-machine-with-or-without-gpu">Benchmark on a standalone machine (with or without GPU)<a class="headerlink" href="#benchmark-on-a-standalone-machine-with-or-without-gpu" title="Permalink to this headline">¶</a></h3>
<p>To run the benchmark with a specific configuration on a standalone machine, inside the DomainLab
folder, one can execute (we assume you have a machine with 4 cores or more)</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Note: this has only been tested on Linux based systems and may not work on Windows</span>
./run_benchmark_standalone.sh<span class="w"> </span>./examples/benchmark/demo_benchmark.yaml<span class="w"> </span><span class="m">0</span><span class="w">  </span><span class="m">0</span><span class="w">  </span><span class="m">2</span>
</pre></div>
</div>
<p>where the first argument is the benchmark configuration file (mandatory), the second and the third
arguments are the starting seeds for cuda and the hyperparameter sampling (both optional) and the
fourth argument is the number of GPUs to use (optional). The number of GPUs defaults to one
(if your machine does not have GPU, the last argument defaults to one as well and CPU is used).</p>
<p>In case of snakemake error, try
<code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-r</span> <span class="pre">.snakemake/</span></code></p>
</section>
<section id="benchmark-on-a-hpc-cluster-with-slurm">
<h3 id="benchmark-on-a-hpc-cluster-with-slurm">Benchmark on a HPC cluster with slurm<a class="headerlink" href="#benchmark-on-a-hpc-cluster-with-slurm" title="Permalink to this headline">¶</a></h3>
<p>If you have access to an HPC cluster with slurm support: In a submission node, clone the DomainLab
repository, cd into the repository and execute the following command:</p>
<p><strong>Make sure to use tool like nohup or tmux to keep the following command active!</strong></p>
<p>It is a good idea to use standalone script to test if the yaml file work or not before submit to slurm cluster.</p>
<div class="highlight-cluster notranslate"><div class="highlight"><pre><span></span># Note: this has only been tested on Linux based systems and may not work on Windows
./run_benchmark_slurm.sh ./examples/benchmark/demo_benchmark.yaml
</pre></div>
</div>
<p>Similar to the local version explained above, the user can also specify a random seed for
hyperparameter sampling and pytorch.</p>
<section id="check-errors-for-slurm-runs">
<h4 id="check-errors-for-slurm-runs">Check errors for slurm runs<a class="headerlink" href="#check-errors-for-slurm-runs" title="Permalink to this headline">¶</a></h4>
<p>The following script will help to find out which job has failed and the error message, so that you could direct to the
specific log file</p>
<div class="highlight-cluster notranslate"><div class="highlight"><pre><span></span>bash ./sh_list_error.sh ./zoutput/slurm_logs
</pre></div>
</div>
</section>
<section id="map-between-slurm-job-id-and-sampled-hyperparameter-index">
<h4 id="map-between-slurm-job-id-and-sampled-hyperparameter-index">Map between slurm job id and sampled hyperparameter index<a class="headerlink" href="#map-between-slurm-job-id-and-sampled-hyperparameter-index" title="Permalink to this headline">¶</a></h4>
<p>suppose the slurm job id is 14144163, one could the corresponding log file in <code class="docutils literal notranslate"><span class="pre">./zoutput/slurm_logs</span></code> folder via
<code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">.</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-i</span> <span class="pre">"14144163"</span></code></p>
<p>the results can be
<code class="docutils literal notranslate"><span class="pre">run_experiment-index=41-14144163.err</span></code>
where <code class="docutils literal notranslate"><span class="pre">41</span></code> is the hyperparameter index in <code class="docutils literal notranslate"><span class="pre">zoutput/benchmarks/[name</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">benchmark]/hyperparameters.csv</span></code>.</p>
</section>
</section>
</section>
<section id="obtained-results">
<h2 id="obtained-results">Obtained results<a class="headerlink" href="#obtained-results" title="Permalink to this headline">¶</a></h2>
<p>All files created by this benchmark are saved in the given output directory
(by default <code class="docutils literal notranslate"><span class="pre">./zoutput/benchmarks/[name</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">benchmark</span> <span class="pre">defined</span> <span class="pre">in</span> <span class="pre">YAML</span> <span class="pre">file]</span></code>). The sampled hyperparameters can be found in
<code class="docutils literal notranslate"><span class="pre">hyperparameters.csv</span></code>. The yaml file is translated to <code class="docutils literal notranslate"><span class="pre">config.txt</span></code> with corresponding to commit in formation in <code class="docutils literal notranslate"><span class="pre">commit.txt</span></code> (<strong>do not update code during benchmark process so results can be reproducible with this commit information</strong>), corresponding to each line in <code class="docutils literal notranslate"><span class="pre">hyperparameters.csv</span></code>, there will
be a csv file in directory <code class="docutils literal notranslate"><span class="pre">rule_results</span></code>.</p>
<section id="output-folder-structure">
<h3 id="output-folder-structure">Output folder structure<a class="headerlink" href="#output-folder-structure" title="Permalink to this headline">¶</a></h3>
<p>via <code class="docutils literal notranslate"><span class="pre">tree</span> <span class="pre">-L</span> <span class="pre">2</span></code> in <code class="docutils literal notranslate"><span class="pre">zoutput/benchmarks/[name</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">benchmark</span> <span class="pre">defined</span> <span class="pre">in</span> <span class="pre">configuration</span> <span class="pre">yaml</span> <span class="pre">file]</span></code>, one can get something like below</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>├── commit.txt
├── config.txt
├── graphics
│   ├── diva_fbopt_full
│   ├── radar_dist.png
│   ├── radar.png
│   ├── scatterpl
│   ├── sp_matrix_dist.png
│   ├── sp_matrix_dist_reg.png
│   ├── sp_matrix.png
│   ├── sp_matrix_reg.png
│   └── variational_plots
├── hyperparameters.csv
├── results.csv
└── rule_results
    ├── 0.csv
    ├── 1.csv
    ├── 2.csv
    ├── 3.csv
    ├── 4.csv
    ├── 5.csv
    ├── 6.csv
    └── 7.csv
</pre></div>
</div>
<p>where commit.txt contains commit information for reproducibility, config.txt is a json format of the configuration yaml file for reproducibility, graphics folder contains the visualization of benchmark results in various plots, specificly, we use <code class="docutils literal notranslate"><span class="pre">graphics/variational_plot/acc/stochastic_variation.png</span></code>, hyperparameters.csv contains all hyperparameters used for each method, results.csv is an aggregation of the csv files in <code class="docutils literal notranslate"><span class="pre">rule_results</span></code>, where the i.csv correspond to the parameter index in hyperparameters.csv</p>
<p><strong>Please do not change anything in folder <code class="docutils literal notranslate"><span class="pre">rule_results</span></code> !</strong></p>
<p>The performance of the different runs from directory <code class="docutils literal notranslate"><span class="pre">rule_results</span></code> will be aggregated after all jobs have been done, which can be found aggregated in <code class="docutils literal notranslate"><span class="pre">results.csv</span></code>, Moreover, there is the <code class="docutils literal notranslate"><span class="pre">graphics</span></code> subdirectory, in which the values from <code class="docutils literal notranslate"><span class="pre">results.csv</span></code> are
visualized for interpretation.</p>
<p>In case that the benchmark is not entirely completed, the user can obtain partial results as
explained below.</p>
</section>
<section id="obtain-partial-results">
<h3 id="obtain-partial-results">Obtain partial results<a class="headerlink" href="#obtain-partial-results" title="Permalink to this headline">¶</a></h3>
<p>If the benchmark is not yet completed (still running or has some failed jobs), the <code class="docutils literal notranslate"><span class="pre">results.csv</span></code> file containing the aggregated results will not be created.
The user can then obtain the aggregated partial results with plots from the partially completed benchmark by running
the following after cd into the DomainLab directory:</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>python main_out.py --agg_partial_bm OUTPUT_DIR
</pre></div>
</div>
<p>specifying the benchmark output directory containing the partially completed benchmark,
e.g. <code class="docutils literal notranslate"><span class="pre">./zoutput/benchmarks/demo_benchmark</span></code>, where <code class="docutils literal notranslate"><span class="pre">demo_benchmark</span></code> is a name defined in the yaml file.</p>
<p>Alternatively, one could use</p>
<div class="highlight-examples notranslate"><div class="highlight"><pre><span></span>cat ./zoutput/benchmarks/[name of the benchmark]/rule_results/*.csv &gt; result.csv
</pre></div>
</div>
<p>clean up the extra csv head generated and plot the csv using command below</p>
</section>
<section id="generate-plots-from-csv-file">
<h3 id="generate-plots-from-csv-file">Generate plots from .csv file<a class="headerlink" href="#generate-plots-from-csv-file" title="Permalink to this headline">¶</a></h3>
<p>If the benchmark is not completed, the <code class="docutils literal notranslate"><span class="pre">graphics</span></code> subdirectory might not be created. The user can then manually
create the graphics from the csv file of the aggregated partial results, which can be obtained as explained above.
Here for, the user must cd into the DomainLab directory and run</p>
<div class="highlight-commandline notranslate"><div class="highlight"><pre><span></span>python main_out.py --gen_plots CSV_FILE --outp_dir OUTPUT_DIR
</pre></div>
</div>
<p>specifying the path of the csv file of the aggregated results (e.g. <code class="docutils literal notranslate"><span class="pre">./zoutput/benchmarks/demo_benchmark/results.csv</span></code>)
and the output directory of the partially completed benchmark (e.g. <code class="docutils literal notranslate"><span class="pre">./zoutput/benchmarks/demo_benchmark</span></code>).
Note that the cvs file must have the same form as the one generated by the fully executed benchmark, i.e.</p>
<table>
<thead>
<tr class="row-odd"><th class="head"><p>param_index</p></th>
<th class="head"><p>task</p></th>
<th class="head"><p>algo</p></th>
<th class="head"><p>epos</p></th>
<th class="head"><p>te_d</p></th>
<th class="head"><p>seed</p></th>
<th class="head"><p>params</p></th>
<th class="head"><p>acc</p></th>
<th class="head"><p>precision</p></th>
<th class="head"><p>recall</p></th>
<th class="head"><p>specificity</p></th>
<th class="head"><p>f1</p></th>
<th class="head"><p>auroc</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>{‘param1’: p1, …}</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>{‘param1’: p2, …}</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
<td><p>…</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2021-2023, Marr Lab..
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>