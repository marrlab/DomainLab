
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#2196f3">
  <script src="_static/javascripts/modernizr.js"></script>
  
  
    <link rel="apple-touch-icon" href="_static/images/apple-icon-152x152.png"/>
  
  
    <title>Task Specification &#8212; domainlab  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/material.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  
    <link rel="apple-touch-icon" href="_static/images/apple-icon-152x152.png"/>
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=teal data-md-color-accent=cyan>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#doc_tasks" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="domainlab  documentation"
           class="md-header-nav__button md-logo">
          
            <i class="md-icon">school</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">DomainLab</span>
          <span class="md-header-nav__topic"> Task Specification </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/marrlab/DomainLab" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    DomainLab
  </div>
</a>
          </div>
        </div>
      
      
    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="readme_link.html" class="md-tabs__link">Introduction</a></li>
            
            <li class="md-tabs__item"><a href="#" class="md-tabs__link">Task Specification</a></li>
            
            <li class="md-tabs__item"><a href="doc_custom_nn.html" class="md-tabs__link">Specify neural network in commandline</a></li>
            
            <li class="md-tabs__item"><a href="doc_MNIST_classification.html" class="md-tabs__link">Examples with MNIST</a></li>
            
            <li class="md-tabs__item"><a href="doc_examples.html" class="md-tabs__link">More commandline examples</a></li>
            
            <li class="md-tabs__item"><a href="doc_benchmark.html" class="md-tabs__link">Benchmarks tutorial</a></li>
            
            <li class="md-tabs__item"><a href="doc_output.html" class="md-tabs__link">Output Structure</a></li>
            
            <li class="md-tabs__item"><a href="doc_extend_contribute.html" class="md-tabs__link">Developers note</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="domainlab documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">school</i>
      
    </a>
    <a href="index.html"
       title="domainlab documentation">DomainLab</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/marrlab/DomainLab" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    DomainLab
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Contents:</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="modules.html" class="md-nav__link">domainlab</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="docHDUVA.html" class="md-nav__link">Model HDUVA</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="doc_dann.html" class="md-nav__link">Model DANN</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="docJiGen.html" class="md-nav__link">Model JiGen</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="doc_diva.html" class="md-nav__link">Model DIVA</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="docMatchDG.html" class="md-nav__link">Trainer MatchDG</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="docDIAL.html" class="md-nav__link">Trainer DIAL</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="docFishr.html" class="md-nav__link">Trainer Fishr</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="doc_mldg.html" class="md-nav__link">Trainer MLDG</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#doc-tasks--page-root" class="md-nav__link">Task Specification</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#possibility-1-specify-train-and-test-domain-dataset-directly" class="md-nav__link">Possibility 1: Specify train and test domain dataset directly</a>
        </li>
        <li class="md-nav__item"><a href="#possibility-2-taskpathlist" class="md-nav__link">Possibility 2: TaskPathList</a>
        </li>
        <li class="md-nav__item"><a href="#possibility-3-taskfolder" class="md-nav__link">Possibility 3: TaskFolder</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#data-organization" class="md-nav__link">Data organization</a>
        </li>
        <li class="md-nav__item"><a href="#specify-the-task-with-domainlab-api" class="md-nav__link">Specify the task with domainlab API</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section class="tex2jax_ignore mathjax_ignore" id="task-specification">
<h1 id="doc-tasks--page-root">Task Specification<a class="headerlink" href="#doc-tasks--page-root" title="Permalink to this heading">¶</a></h1>
<p>The package offers various ways to specify a domain generalization task (where to find the data, which domain to use as training, which to test) according to user’s need.</p>
<p>For all thress ways covered below, the user has to prepare a python file to feed via argument <code class="docutils literal notranslate"><span class="pre">--tpath</span></code> (means task path) into DomainLab.  We provide example python files in our repository <a class="reference external" href="https://github.com/marrlab/DomainLab/tree/master/examples/tasks">see all examples here for specifying domain generalization task</a> so that the user could follow the example to create their own domain generalization task specification.  We provide inline comment to explain what each line is doing, as well as below in this documentation.</p>
<section id="possibility-1-specify-train-and-test-domain-dataset-directly">
<h2 id="possibility-1-specify-train-and-test-domain-dataset-directly">Possibility 1: Specify train and test domain dataset directly<a class="headerlink" href="#possibility-1-specify-train-and-test-domain-dataset-directly" title="Permalink to this heading">¶</a></h2>
<p>The most straightforward way to specify a domain generalization task is, if you have already a <a class="reference external" href="https://pytorch.org/tutorials/beginner/basics/data_tutorial.html">PyTorch Dataset</a> class for each domain: you could define a dictionary with the key being name for domain, and the value being the PyTorch Dataset you created corresponding to that domain (train and validation or only training)
<a class="reference external" href="https://github.com/marrlab/DomainLab/blob/master/examples/tasks/task_dset_custom.py">See an example python file here</a></p>
<p>To train a ERM (Emperical Risk Minimization) network on this task:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>main_out.py<span class="w"> </span>--te_d<span class="w"> </span>domain1<span class="w"> </span>--tr_d<span class="w"> </span>domain2<span class="w"> </span>domain3<span class="w"> </span>--tpath<span class="o">=</span>examples/tasks/task_dset_custom.py<span class="w"> </span>--bs<span class="o">=</span><span class="m">32</span><span class="w"> </span>--model<span class="o">=</span>erm<span class="w"> </span>--nname<span class="o">=</span>conv_bn_pool_2
</pre></div>
</div>
<p>here in the example, 3 domains are defined to be named “domain1”, “domain2”, “domain3”, <code class="docutils literal notranslate"><span class="pre">--tpath</span></code> specifies where the python file specifying the task is stored, <code class="docutils literal notranslate"><span class="pre">--bs=32</span></code> use 32 as batchsize, <code class="docutils literal notranslate"><span class="pre">erm</span></code> is our nickname for ERM, <code class="docutils literal notranslate"><span class="pre">--nname</span></code> specifies a hard coded neural network in DomainLab, to use custom neural network, see related documentation.</p>
</section>
<section id="possibility-2-taskpathlist">
<h2 id="possibility-2-taskpathlist">Possibility 2: TaskPathList<a class="headerlink" href="#possibility-2-taskpathlist" title="Permalink to this heading">¶</a></h2>
<p>The user need to provide a python file indicating the root directories where images (data) from  each domain are located, and for each domain, the user shall provide a plain text file indicating the file names.</p>
<p>An example python file can be found in the <a class="reference external" href="https://github.com/marrlab/DomainLab/blob/master/examples/tasks/demo_task_path_list_small.py">examples directory of the repository</a> with the corresponding data be found at <a class="reference external" href="https://github.com/marrlab/DomainLab/tree/master/domainlab/zdata">the data directory of the repository</a>, where the text file indicating which file correspond to which class label (starting from 1) can be found at <a class="reference external" href="https://github.com/marrlab/DomainLab/blob/master/domainlab/zdata/pacs_split/art_painting_10.txt">example text file</a>.
The user should specify the location of the python file via command line arguments <code class="docutils literal notranslate"><span class="pre">--tpath</span></code></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>main_out.py<span class="w"> </span>--te_d<span class="o">=</span>sketch<span class="w"> </span>--tpath<span class="o">=</span>examples/tasks/demo_task_path_list_small.py<span class="w"> </span>--debug<span class="w"> </span>--bs<span class="o">=</span><span class="m">2</span><span class="w"> </span>--npath<span class="o">=</span>examples/nets/resnet.py<span class="w"> </span>--model<span class="o">=</span>diva<span class="w"> </span>--npath_dom<span class="o">=</span>examples/nets/resnet.py<span class="w"> </span>--gamma_y<span class="o">=</span>7e5<span class="w"> </span>--gamma_d<span class="o">=</span>1e5
</pre></div>
</div>
</section>
<section id="possibility-3-taskfolder">
<h2 id="possibility-3-taskfolder">Possibility 3: TaskFolder<a class="headerlink" href="#possibility-3-taskfolder" title="Permalink to this heading">¶</a></h2>
<p>In this mode,  we assume there are structured folders where each folder contains all data from one domain, and each domain folder contains subfolders corresponding to different classes. See examples below.</p>
<section id="data-organization">
<h3 id="data-organization">Data organization<a class="headerlink" href="#data-organization" title="Permalink to this heading">¶</a></h3>
<p>To give an example, suppose we have a classification task to classify between car, dog, human, chair and bird and there are 3 data sources (domains) with folder name “folder_a”, “folder_b” and “folder_c” respectively as shown below.</p>
<p>In each folder, the images are organized in sub-folders by their class. For example, “/path/to/3rd_domain/folder_c/dog” folder contains all the images of class “dog” from the 3rd domain.</p>
<p>It might be the case that the same classes are named differently across the different data sources. For example, in the 1st data source, the class dog is stored in a sub-folder named “hund”, in the 2nd data source, the dog is stored in a sub-folder named “husky”, and in the 3rd data source, the dog is stored in a sub-folder called “dog”.</p>
<p>In that case, we can use <code class="docutils literal notranslate"><span class="pre">dict_domain_folder_name2class</span></code> to map the corresponding subfolders to the correct domain. The <code class="docutils literal notranslate"><span class="pre">dict_domain_folder_name2class</span></code> parameter is a dictionary where:</p>
<ul class="simple">
<li><p>Key: The name of a subfolder in a specific domain.</p></li>
<li><p>Value: The corresponding user-defined class name.</p></li>
</ul>
<p>This is also shown in the example below, where the dictionary maps the different subfolder names to ‘car’ and ‘chair’, which are the user defined classes. A more complex example of such a mapping can be found <a class="reference download internal" download="" href="_downloads/8c3453d7f5ede473ef436dd89659bc6e/task_blood3.py"><span class="xref download myst">here</span></a>.</p>
<p>It might also be the case that some classes exist in one data source but do not exist in another data source. For example, folder “/path/to/2nd_domain/folder_b” does not have a sub-folder for the class “human”. In that case, we don’t add the entry into the <code class="docutils literal notranslate"><span class="pre">dict_domain_folder_name2class</span></code> mapping.</p>
<p>Folder structure of the 1st domain:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>    ── /path/to/1st_domain/folder_a
       ├── auto
       ├── hund
       ├── mensch
       ├── stuhl
       └── vogel
</pre></div>
</div>
<p>Folder structure of the 2nd domain:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    ── /path/to/2nd_domain/folder_b
       ├── bird
       ├── drive
       ├── sit
       └── husky
</pre></div>
</div>
<p>Folder structure of the 3rd domain:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>    ── /path/to/3rd_domain/folder_c
        ├── dog
        ├── flying
        ├── sapiens
        ├── sofa
        └── vehicle
</pre></div>
</div>
</section>
<section id="specify-the-task-with-domainlab-api">
<h3 id="specify-the-task-with-domainlab-api">Specify the task with domainlab API<a class="headerlink" href="#specify-the-task-with-domainlab-api" title="Permalink to this heading">¶</a></h3>
<p>The user is expected to implement something similar to the following code in a separate python file with a function with signature <code class="docutils literal notranslate"><span class="pre">get_task(na=None)</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">torchvision</span> <span class="kn">import</span> <span class="n">transforms</span>

<span class="kn">from</span> <span class="nn">domainlab.tasks</span> <span class="kn">import</span> <span class="n">mk_task_folder</span><span class="p">,</span> <span class="n">ImSize</span>

<span class="c1"># specify torchvision transformations for training</span>
<span class="n">trans_tr</span> <span class="o">=</span> <span class="n">transforms</span><span class="o">.</span><span class="n">Compose</span><span class="p">([</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">Resize</span><span class="p">((</span><span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">)),</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">RandomResizedCrop</span><span class="p">(</span><span class="mi">224</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)),</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">RandomHorizontalFlip</span><span class="p">(),</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">ColorJitter</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">),</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">RandomGrayscale</span><span class="p">(),</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">ToTensor</span><span class="p">(),</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">Normalize</span><span class="p">([</span><span class="mf">0.485</span><span class="p">,</span> <span class="mf">0.456</span><span class="p">,</span> <span class="mf">0.406</span><span class="p">],</span>
                         <span class="p">[</span><span class="mf">0.229</span><span class="p">,</span> <span class="mf">0.224</span><span class="p">,</span> <span class="mf">0.225</span><span class="p">])</span>
<span class="p">])</span>

<span class="c1"># specify torchvision transformations at test/inference time</span>
<span class="n">trans_te</span> <span class="o">=</span> <span class="n">transforms</span><span class="o">.</span><span class="n">Compose</span><span class="p">([</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">Resize</span><span class="p">((</span><span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">)),</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">ToTensor</span><span class="p">(),</span>
    <span class="n">transforms</span><span class="o">.</span><span class="n">Normalize</span><span class="p">([</span><span class="mf">0.485</span><span class="p">,</span> <span class="mf">0.456</span><span class="p">,</span> <span class="mf">0.406</span><span class="p">],</span>
                         <span class="p">[</span><span class="mf">0.229</span><span class="p">,</span> <span class="mf">0.224</span><span class="p">,</span> <span class="mf">0.225</span><span class="p">])</span>
<span class="p">])</span>


<span class="n">chain</span> <span class="o">=</span> <span class="n">mk_task_folder</span><span class="p">(</span><span class="n">extensions</span><span class="o">=</span><span class="p">{</span><span class="s2">"domain1"</span><span class="p">:</span> <span class="s2">"jpg"</span><span class="p">,</span> <span class="s2">"domain2"</span><span class="p">:</span> <span class="s2">"jpg"</span><span class="p">,</span> <span class="s2">"domain3"</span><span class="p">:</span> <span class="s2">"jpg"</span><span class="p">},</span>
                       <span class="n">list_str_y</span><span class="o">=</span><span class="p">[</span><span class="s2">"chair"</span><span class="p">,</span> <span class="s2">"car"</span><span class="p">],</span>
                       <span class="n">dict_domain_folder_name2class</span><span class="o">=</span><span class="p">{</span>
                           <span class="s2">"domain1"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"auto"</span><span class="p">:</span> <span class="s2">"car"</span><span class="p">,</span> <span class="s2">"stuhl"</span><span class="p">:</span> <span class="s2">"chair"</span><span class="p">},</span>
                           <span class="s2">"domain2"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"vehicle"</span><span class="p">:</span> <span class="s2">"car"</span><span class="p">,</span> <span class="s2">"sofa"</span><span class="p">:</span> <span class="s2">"chair"</span><span class="p">},</span>
                           <span class="s2">"domain3"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"drive"</span><span class="p">:</span> <span class="s2">"car"</span><span class="p">,</span> <span class="s2">"sit"</span><span class="p">:</span> <span class="s2">"chair"</span><span class="p">}</span>
                       <span class="p">},</span>
                       <span class="n">dict_domain_img_trans</span><span class="o">=</span><span class="p">{</span>
                           <span class="s2">"domain1"</span><span class="p">:</span> <span class="n">trans_tr</span><span class="p">,</span>
                           <span class="s2">"domain2"</span><span class="p">:</span> <span class="n">trans_tr</span><span class="p">,</span>
                           <span class="s2">"domain3"</span><span class="p">:</span> <span class="n">trans_tr</span><span class="p">,</span>
                       <span class="p">},</span>
                       <span class="n">img_trans_te</span><span class="o">=</span><span class="n">trans_te</span><span class="p">,</span>
                       <span class="n">isize</span><span class="o">=</span><span class="n">ImSize</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">224</span><span class="p">),</span>
                       <span class="n">dict_domain2imgroot</span><span class="o">=</span><span class="p">{</span>
                           <span class="s2">"domain1"</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"/path/to/1st_domain"</span><span class="p">,</span> <span class="s2">"folder_a"</span><span class="p">),</span>
                           <span class="s2">"domain2"</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"/path/to/2nd_domain"</span><span class="p">,</span> <span class="s2">"folder_b"</span><span class="p">),</span>
                           <span class="s2">"domain3"</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">"/path/to/3rd_domain"</span><span class="p">,</span> <span class="s2">"folder_c"</span><span class="p">)},</span>
                       <span class="n">taskna</span><span class="o">=</span><span class="s2">"task_demo"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_task</span><span class="p">(</span><span class="n">na</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>  <span class="c1"># the package will call this function to get the task</span>
    <span class="k">return</span> <span class="n">chain</span>
</pre></div>
</div>
<p>The domainlab function to create task in this example is <code class="docutils literal notranslate"><span class="pre">domainlab.tasks.mk_task_folder</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">domainlab.tasks</span> <span class="kn">import</span> <span class="n">mk_task_folder</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mk_task_folder</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">extensions</span></code>: a python dictionary with key as the domain name
and value as the file extensions of the image.</p>
<p><code class="docutils literal notranslate"><span class="pre">list_str_y</span></code>: a python list with user defined class names where
the order of the list matters.</p>
<p><code class="docutils literal notranslate"><span class="pre">dict_domain_folder_name2class</span></code>: a python dictionary, with key
as the user specified domain name, value as a dictionary to map the
sub-folder name of each domain’s class folder into the user defined
common class name.</p>
<p><code class="docutils literal notranslate"><span class="pre">dict_domain_img_trans</span></code>: a python dictionary with keys as the user
specified domain name, value as a user defined torchvision transform.
This feature allows carrying out different transformation (composition) to different
domains at training time.</p>
<p><code class="docutils literal notranslate"><span class="pre">img_trans_te</span></code>: at test or inference time, we do not have knowledge
of domain information so only a unique transform (composition) is allowed.</p>
<p><code class="docutils literal notranslate"><span class="pre">isize</span></code>: domainlab.tasks.ImSize(image channel, image height, image width)</p>
<p><code class="docutils literal notranslate"><span class="pre">dict_domain2imgroot</span></code>: a python dictionary with keys as user specified domain names and values
as the absolute path to each domain’s data.</p>
<p><code class="docutils literal notranslate"><span class="pre">taskna</span></code>: user defined task name</p>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2021-2024, Marr Lab..
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>