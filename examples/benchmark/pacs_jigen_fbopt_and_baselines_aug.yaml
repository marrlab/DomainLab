mode: grid

output_dir: zoutput/benchmarks/pacs_aug_jigen

sampling_seed: 0

startseed: 0
endseed: 3

test_domains:
  - sketch

domainlab_args:
  tpath: examples/tasks/task_pacs_aug_noflip.py
  dmem: False
  epos: 500
  epos_min: 200
  es: 1
  bs: 64
  san_check: False
  npath: examples/nets/resnet50domainbed.py
  npath_dom: examples/nets/resnet50domainbed.py
  npath_topic_distrib_img2topic: examples/nets/resnet50domainbed.py
  npath_encoder_sandwich_layer_img2h4zd: examples/nets/resnet50domainbed.py
  zx_dim: 0
  zy_dim: 64
  zd_dim: 64
  pperm: 0.1


Shared params:
  lr:
    distribution: categorical
    values:
      - 5e-5
      - 1e-3

  k_i_gain:
    min: 0.0001
    max: 0.01
    num: 2
    distribution: loguniform

  k_i_gain_ratio:
    min: 0.1
    max: 1
    num: 4
    distribution: uniform

  mu_init:
    min: 0.000001
    max: 0.00005
    num: 2
    distribution: loguniform

  pperm:
    min: 0.1
    max: 0.9
    num: 3
    distribution: uniform

  gamma_reg:
    min: 0.01
    max: 10
    num: 4
    distribution: loguniform

  mu_clip:
    distribution: categorical
    datatype: float
    values:
      - 0.01
      - 0.1
      - 1.0
      - 10

# Test fbopt with different hyperparameter configurations

jigen_feedback:
  model: jigen
  trainer: fbopt
  ini_setpoint_ratio: 0.99
  mu_init: 1e-6
  force_setpoint_change_once: True
  shared:
    - k_i_gain_ratio
    - mu_clip
    - lr
    
jigen_feedforward:
  model: jigen
  trainer: hyperscheduler
  shared:
    - gamma_reg
    - lr

jigen_fixed_penalty:
  model: jigen
  trainer: basic
  shared:
    - gamma_reg
    - lr

erm:
  model: erm
